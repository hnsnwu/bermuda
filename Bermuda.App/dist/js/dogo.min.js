/*!
* dogo.js 1.0.0-alpha.1
* @author Bermuda Team
*/
function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}"use strict";var _get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},_createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();!function(n){console.log("Welcome to visit Bermuda website!");var f=function(){var t=document.querySelector(".caro-slider");if(t)var f=t.querySelectorAll(".item"),u=f[0].offsetWidth,e=f.length-7,i=0,r=u,o=n.setInterval(function(){var n=-Math.pow(-1,i/e^0);i%e==0&&i!=0&&(r=u);t.style.transform=n<0?"translateX(-"+r+"px)":"translateX(-"+r+"px)";r+=u;i++},2e3)},e=function(){var n=document.getElementsByClassName("user-profile")[0],i,t;n&&(i=n.getElementsByClassName("user-avatar")[0],t=n.getElementsByClassName("profile")[0],n.addEventListener("mouseover",function(){t.style.visibility="visible";t.style.opacity="1"},!1),n.addEventListener("mouseout",function(){t.style.opacity="0";t.style.visibility="hidden"},!1))},o=function(){var n=document.getElementsByClassName("prompt")[0];n&&n.innerText&&function(){n.style.opacity=.6;var t=setTimeout(function(){n.style.opacity=0;clearTimeout(t)},5e3)}()},s=function(){var i=document.getElementsByClassName("sign-body")[0],r,f,n,e,t,u;if(i)for(r=i.getElementsByClassName("sign-input")[0],f=i.getElementsByClassName("sign-btn")[0],f.addEventListener("click",function(){for(var t=r.getElementsByClassName("validator"),u=function(n){var i=setTimeout(function(){t[n].style.opacity=1;clearTimeout(i)},0)},n=0,i=t.length;n<i;n++)u(n,i)},!1),n=r.getElementsByClassName("item"),e=function(t){var i=n[t].getElementsByTagName("input")[0];i.addEventListener("keydown",function(){for(var r=n[t].getElementsByClassName("validator"),f=function(n){var t=setTimeout(function(){r[n].style.opacity=0;clearTimeout(t)},0)},i=0,u=r.length;i<u;i++)f(i,u)},!1)},t=0,u=n.length;t<u;t++)e(t,u)},h=function(){var t=document.getElementsByClassName("upload-input")[0];t&&t.addEventListener("change",function(){var i=undefined,f=document.getElementsByClassName("icon-upload-img")[0],r,u;if(window.FileReader?i=new FileReader:n.alert("Your device does not support picture preview, please upgrade your device if you need this feature！"),r=t.files[0],u=/^image\//,!u.test(r.type)){alert("Please select a image！");return}i.onload=function(n){var r=document.getElementsByClassName("upload-img")[0],u=document.createDocumentFragment(),i=r.getElementsByClassName("preview"),t;if(console.log(i),i.length!=0){i[0].src=n.target.result;return}t=document.createElement("img");t.className="preview";t.src=n.target.result;u.appendChild(t);r.appendChild(u)};i.readAsDataURL(r);f.classList.add("hidden")},!1)},c=function(){var r=t(".create-topic")[0],i=t(".topic-edit-container")[0],u;i&&r&&(r.addEventListener("click",function(){i.style.display="flex";var t=n.setTimeout(function(){i.style.opacity="1";n.clearTimeout(t)},0)},!1),u=i.getElementsByClassName("icon-close")[0],u.addEventListener("click",function(){i.style.opacity="0";var t=n.setTimeout(function(){i.style.display="none";n.clearTimeout(t)},300)},!1))},l=function(){var t,i;if(n.location.pathname!=="/Home.aspx"&&n.location.pathname!=="/"){if(t=document.getElementsByClassName("menu")[0],!t)return;i=t.getElementsByClassName("active")[0];i.classList.remove("active")}},a=function(){var f=document.getElementsByClassName("comment")[0],n,e,t,i,r;if(f)for(n=f.getElementsByClassName("item"),e=function(t){var o=n[t].getElementsByClassName("meta"),i=n[t].getElementsByClassName("hidden")[0],c=n[t].getElementsByClassName("cmnt-reply")[0],f,s,a,h,l,r,e;if(!c)return{v:undefined};for(f=c.getElementsByClassName("aims-user"),s=[],r=0,e=f.length;r<e;r++)f[r].innerText.length===0&&s.push(r);for(a=f.length,h=0,s.forEach(function(n){n=n-h;f[n].parentNode.removeChild(f[n]);h++}),l=function(n){var t=o[n].getElementsByClassName("reply")[0];t.addEventListener("click",function(){var c=u(),s,h;if(!c){v("/layout/SignIn.aspx");return}i.classList.remove("hidden");var f=o[n].parentElement.getElementsByClassName("name")[0],r=i.getElementsByTagName("textarea")[0],e=t.getAttribute("data-aims-id");r.value="";e&&(s=i.getElementsByTagName("input")[0],s.value=e);h=f?"@"+f.innerText:"写下你的回复（140 字以内）";r.setAttribute("placeholder",h);r.focus();var l=setTimeout(function(){i.style.opacity="1";clearTimeout(l)},0),a=i.getElementsByClassName("cancel")[0],y=i.getElementsByClassName("reply-btn")[0].getElementsByTagName("input")[0];a.addEventListener("click",function(){i.style.opacity="0";var n=setTimeout(function(){i.classList.add("hidden");clearTimeout(n)},300)},!1);y.addEventListener("click",function(){i.classList.add("hidden")},!1)},!1)},r=0,e=o.length;r<e;r++)l(r,e)},t=0,i=n.length;t<i;t++)if(r=e(t,i),typeof r=="object")return r.v},v=function(t){n.location.href=t},y=function(){var o=function(){function n(t,i){_classCallCheck(this,n);this.x=t;this.y=i;this.r=Math.random()*14+1;this._mx=Math.random()*2-1;this._my=Math.random()*2-1}return _createClass(n,[{key:"drawCircle",value:function(n){n.beginPath();n.arc(this.x,this.y,this.r,0,360);n.closePath();n.fillStyle="#fdebeb";n.fill()}},{key:"drawLine",value:function(n,t){var i=this.x-t.x,r=this.y-t.y,u=Math.sqrt(i*i+r*r);u<150&&(n.beginPath(),n.moveTo(this.x,this.y),n.lineTo(t.x,t.y),n.closePath(),n.strokeStyle="#fdebeb",n.stroke())}},{key:"move",value:function(n,t){this._mx=this.x<n&&this.x>0?this._mx:-this._mx;this._my=this.y<t&&this.y>0?this._my:-this._my;this.x+=this._mx/2;this.y+=this._my/2}}]),n}(),h=function(n){function t(n,i){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n,i)}return _inherits(t,n),t}(o),i;if(n.requestAnimationFrame=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,i=document.querySelector("#canvas"),i){var u=i.getContext("2d"),f=i.width=i.offsetWidth,e=i.height=i.offsetHeight,t=[],r=new h(0,0),s=function s(){var n,i,o;for(u.clearRect(0,0,f,e),n=0;n<t.length;n++)for(t[n].move(f,e),t[n].drawCircle(u),i=n+1;i<t.length;i++)t[n].drawLine(u,t[i]);if(r.x)for(r.drawCircle(u),o=1;o<t.length;o++)r.drawLine(u,t[o]);requestAnimationFrame(s)},c=function(n){for(var i=0;i<n;i++)t.push(new o(Math.random()*f,Math.random()*e));s()};n.addEventListener("load",c(80));n.onmousemove=function(n){n=n||window.event;r.x=n.clientX;r.y=n.clientY};n.onmouseout=function(){r.x=null;r.y=null}}},p=function(){var n=document.getElementById("zoom-container");if(n){var i=n.getElementsByClassName("zoom-img")[0],t=n.parentElement.getElementsByClassName("goods-img")[0],r=n.getElementsByClassName("caption")[0],u=n.getElementsByClassName("close")[0];t.addEventListener("click",function(){n.style.display="block";i.src=t.src;r.innerHTML=t.alt},!1);u.addEventListener("click",function(){n.style.display="none"},!1)}},nt=function(){},w=function(){var t=document.getElementsByClassName("link-signin")[0],i;t&&(i=u(),n.location.pathname!=="/Home.aspx"&&n.location.pathname!=="/"&&i!==!0&&(t.style.display="block"))},u=function(){var n=document.getElementById("UserProfile");return n?!0:!1},tt=function(n){for(var i,r=document.cookie.replace(/\s/g,"").split(";"),t=0,u=r.length;t<u;t++)if(i=r[t].split("="),i[0]==n)return decodeURIComponent(i[1]);return""},b=function(){var n=document.getElementsByClassName("tablist"),t;n&&n.length!=0&&(t=Array.prototype.slice.call(n,0),t.forEach(function(n){n.addEventListener("click",function(t){var i=t.target||t.srcElement,r=i.tagName.toLowerCase(),u=n.querySelector(".active"),f=n.querySelector(".active-btn");/a/.test(r)?(u&&u.classList.remove("active"),i=r==="a"?i:i.parentElement,i.classList.add("active")):/input/.test(r)&&(f&&f.classList.remove("active-btn"),i.classList.add("active-btn"))},!1)}))},i=function(n,t){var i,r;if(typeof n=="object"&&typeof t=="object"){for(i in t)t.hasOwnProperty(i)&&(r=t[i],n.setAttribute(i,r));return n}},t=function(n){return n.startsWith(".")?document.getElementsByClassName(n.substr(1)):n.startsWith("#")?document.getElementById(n.substr(1)):document.getElementsByTagName(n)},k=function(n){return typeof n=="object"?Array.prototype.slice.call(n):null},r=function(n){return document.createElement(n)},d=function(){var n=t("#pub-current-btn"),i,r;n&&(i=t(".select-topic")[0],r=t(".cancel-btn")[0],n.addEventListener("click",function(){i.style.opacity="1";n.classList.add("clicked")},!1),r.addEventListener("click",function(){i.style.opacity="0";n.classList.remove("clicked")}))},g=function(){var l=t(".search-items")[0],c,e,o,s;if(l){var u=t("#LbTopic"),h=document.createDocumentFragment(),f=r("div"),n=r("ul");i(f,{"class":"multiple-search-selector"});i(n,{"class":"options"});f.appendChild(n);c=k(u);c.forEach(function(t){if(!t.disabled){var u=r("li");i(u,{"class":"item","data-index":t.index,"data-value":t.value,selected:!1}).textContent=t.textContent;n.appendChild(u)}});e=t(".selected-items")[0];o=document.createDocumentFragment();n.addEventListener("click",function(n){var t=n.target||n.srcElement;e.childNodes.length!=3&&t.classList.contains("item")&&function(){var f=t.getAttribute("data-index"),n,s;u.options[f].selected=!0;i(t,{selected:!0});t.classList.contains("active")&&t.classList.remove("active");n=r("span");s=r("i");i(n,{"class":"item","data-selected-index":f}).textContent=t.textContent;i(s,{"class":"icon-delete"}).addEventListener("click",function(){u.options[f].selected=!1;i(t,{selected:!1});n.parentElement.removeChild(n)},!1);n.appendChild(s);o.appendChild(n);e.appendChild(o)}()},!1);h.appendChild(f);u.parentElement.appendChild(h);s=t("#SearchTopic");s.addEventListener("keyup",function(){for(var r=s.value,i=n.getElementsByClassName("item"),t=0,u=i.length;t<u;t++)i[t].textContent.includes(r)&&r&&i[t].getAttribute("selected")=="false"?i[t].classList.add("active"):i[t].classList.remove("active")})}};f();e();o();s();h();c();l();a();y();p();w();b();g();d()}(window);